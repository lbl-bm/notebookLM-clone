# US-001: 用户登录与身份认证

## 用户故事
作为一个**新用户**，我希望能够**通过 Supabase Auth 登录系统**，以便**安全地访问我的个人知识库**。

## 验收标准

### 场景 1：首次访问
- [ ] 当我访问应用首页时，我应该看到登录界面
- [ ] 我可以选择邮箱/密码登录或第三方登录（Google/GitHub）
- [ ] 登录成功后，我应该被重定向到 Notebook 列表页

### 场景 2：已登录用户
- [ ] 当我再次访问应用时，如果 session 有效，我应该直接进入 Notebook 列表页
- [ ] 我可以在任何页面看到我的用户头像和退出按钮
- [ ] 点击退出后，我应该被重定向到登录页，且 session 被清除

### 场景 3：Session 过期
- [ ] 当我的 session 过期时，我应该被自动重定向到登录页
- [ ] 我应该看到友好的提示信息："您的登录已过期，请重新登录"

## 技术约束
- 使用 `@supabase/ssr` 管理 Cookie-based session
- 使用 Next.js 14 App Router 的 middleware 保护路由
- 所有 API 调用必须验证 `auth.uid()`

## 依赖
- Supabase 项目已创建
- Auth 配置已完成（邮箱验证、OAuth providers）

## 优先级
🔴 P0 - Week 1

## 估算
2 Story Points (1天)

## 测试用例
1. 使用有效邮箱/密码登录 → 成功进入系统
2. 使用无效凭证登录 → 显示错误提示
3. 登录后刷新页面 → 保持登录状态
4. 退出登录 → session 清除，无法访问受保护页面
5. 未登录访问 `/notebooks` → 重定向到登录页
