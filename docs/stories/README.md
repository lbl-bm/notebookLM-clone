# 用户故事索引

> 基于 PROJECT_SPEC.md 和 ROADMAP.md 生成的用户故事集合

## 📋 故事概览

| ID | 故事名称 | 优先级 | 估算 | 计划周 | 状态 |
|---|---|---|---|---|---|
| US-001 | 用户登录与身份认证 | 🔴 P0 | 2 SP | Week 1 | 📝 待开发 |
| US-002 | 创建和管理 Notebook | 🔴 P0 | 3 SP | Week 1 | 📝 待开发 |
| US-003 | 上传 PDF 作为知识源 | 🔴 P0 | 5 SP | Week 2 | 📝 待开发 |
| US-004 | 添加网页链接作为知识源 | 🔴 P0 | 3 SP | Week 2 | 📝 待开发 |
| US-005 | 解析文档并向量化 | 🔴 P0 | 8 SP | Week 3 | 📝 待开发 |
| US-006 | 基于知识库的 RAG 问答 | 🔴 P0 | 8 SP | Week 4 | 📝 待开发 |
| US-007 | 引文高亮与来源定位 | 🔴 P0 | 5 SP | Week 4 | 📝 待开发 |
| US-008 | Studio 动作生成产物 | 🔴 P0 | 8 SP | Week 5 | 📝 待开发 |
| US-009 | Prompt 模板库 | 🟡 P1 | 5 SP | Week 5 | 📝 待开发 |
| US-010 | RAG 链路可视化 | 🟡 P1 | 5 SP | Week 6 | 📝 待开发 |

**总估算**: 52 Story Points (~26 天，2 人并行约 3 周完成核心功能)

---

## 🗂️ 按功能模块分类

### 🔐 认证与权限
- [US-001: 用户登录与身份认证](./US-001-user-authentication.md)

### 📚 Notebook 管理
- [US-002: 创建和管理 Notebook](./US-002-create-notebook.md)

### 📄 知识源管理
- [US-003: 上传 PDF 作为知识源](./US-003-upload-pdf-source.md)
- [US-004: 添加网页链接作为知识源](./US-004-add-url-source.md)
- [US-005: 解析文档并向量化](./US-005-process-and-vectorize.md)

### 💬 RAG 问答
- [US-006: 基于知识库的 RAG 问答](./US-006-rag-chat.md)
- [US-007: 引文高亮与来源定位](./US-007-citation-highlight.md)

### 🎨 Studio 产物生成
- [US-008: Studio 动作生成产物](./US-008-studio-actions.md)
- [US-009: Prompt 模板库](./US-009-prompt-templates.md)

### 📊 可视化与调试
- [US-010: RAG 链路可视化](./US-010-rag-visualization.md)

---

## 📅 按开发周排序

### Week 1: 项目骨架 + 登录 + Notebook 管理
- US-001: 用户登录与身份认证 (2 SP)
- US-002: 创建和管理 Notebook (3 SP)
- **小计**: 5 SP

### Week 2: Source 管理 + 上传/链接
- US-003: 上传 PDF 作为知识源 (5 SP)
- US-004: 添加网页链接作为知识源 (3 SP)
- **小计**: 8 SP

### Week 3: 解析 + 向量化
- US-005: 解析文档并向量化 (8 SP)
- **小计**: 8 SP

### Week 4: RAG 问答 + 引文
- US-006: 基于知识库的 RAG 问答 (8 SP)
- US-007: 引文高亮与来源定位 (5 SP)
- **小计**: 13 SP

### Week 5: Studio 动作 + 模板
- US-008: Studio 动作生成产物 (8 SP)
- US-009: Prompt 模板库 (5 SP)
- **小计**: 13 SP

### Week 6: 可视化 + 打磨
- US-010: RAG 链路可视化 (5 SP)
- **小计**: 5 SP

---

## 🎯 按优先级分类

### 🔴 P0 - 必须实现（MVP 核心）
- US-001, US-002, US-003, US-004, US-005, US-006, US-007, US-008
- **小计**: 42 SP

### 🟡 P1 - 强烈建议（差异化亮点）
- US-009, US-010
- **小计**: 10 SP

---

## 🏗️ 架构风险关联

每个用户故事都标注了相关的架构风险（来自 PROJECT_SPEC.md 第 8 章）：

| 架构风险 | 关联故事 | 优先级 |
|---|---|---|
| 8.1 向量维度一致性 | US-005, US-006 | 🔴 P0 |
| 8.2 文件解析错误恢复 | US-003, US-004, US-005 | 🔴 P0 |
| 8.3 Citations 去重 | US-006, US-007 | 🟡 P1 |
| 8.4 流式 Citations 时序 | US-006 | 🟡 P1 |
| 8.5 Storage 文件管理 | US-003 | 🔴 P0 |
| 8.6 预处理队列 | US-005 | 🟢 P2 |

---

## 📝 故事模板说明

每个用户故事包含以下部分：

1. **用户故事**: 以"作为...我希望...以便..."格式描述
2. **验收标准**: 按场景列出可测试的标准
3. **技术约束**: 必须遵守的技术限制
4. **API 端点**: 需要实现的接口
5. **依赖**: 前置故事或技术依赖
6. **优先级**: P0/P1/P2
7. **估算**: Story Points
8. **测试用例**: 具体的测试场景
9. **架构风险关联**: 相关的架构风险点

---

## 🚀 如何使用

### 开发前
1. 阅读对应周的用户故事
2. 检查依赖是否已完成
3. 查看关联的架构风险（ARCHITECTURE_RISKS_QUICK_REF.md）
4. 确认 API 契约（PROJECT_SPEC.md 第 6 章）

### 开发中
1. 按验收标准逐项实现
2. 编写测试用例
3. 更新故事状态（📝 待开发 → 🚧 开发中 → ✅ 已完成）

### 开发后
1. 运行所有测试用例
2. 检查架构风险是否已缓解
3. 更新 ROADMAP.md 中的 Checklist

---

## 📞 需要帮助？

- 技术规格：`PROJECT_SPEC.md`
- 排期计划：`ROADMAP.md`
- 架构风险：`ARCHITECTURE_RISKS_QUICK_REF.md`
- 快速参考：每个故事都有完整的验收标准和测试用例

**记住**: 用户故事是"做什么"，不是"怎么做"。具体实现细节请参考技术规格文档。
